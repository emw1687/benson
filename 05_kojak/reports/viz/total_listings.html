<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Number of Listings by City</title>
        <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
        <style type="text/css">
        </style>
    </head>
    <body>
        <!-- <p>Click on this text to update the chart with new data values!</p> -->
        <script type="text/javascript">
            // Your beautiful D3 code will go here

            //svg width and height
            var w = 2000;
            var h = 2000;

            //create svg
            var svg = d3.select("body")
                        .append("svg")
                        .attr("width", w)
                        .attr("height", h);

            var projection = d3.geo.albersUsa();

            var path = d3.geo.path().projection(projection);


            //define dataset
            //cities and their total listings
            //map
            d3.json("data/us.json", function(json) {

              svg.selectAll("path")
                 .data(json.features)
                 .enter()
                 .append("path")
                 .attr("d", path)
                 .attr("fill", "grey");

            });





            /*
            //create circles, one for each city in dataset
            var circles = svg.selectAll("circle")
                             .data(dataset)
                             .enter()
                             .append("circle");
            */

            /*
            //add attributes to circles
            //cx, cy = lat/long
            //r = sqrt(number of listings * pi)
            circles.attr("cx", function(d, i) {
                            return (i * 50) + 25;
                          })
                   .attr("cy", h/2)
                   .attr("r", function (d) {
                            return d[1] * 10;
                   });
            */
            /*
            //create scales and axes
            var xpadding = 0.1 * w;
            var ypadding = 0.1 * h;

            //create scales and axes
            var xscale = d3.scaleLinear()
                                 .domain([0, d3.max(dataset, function(d) {return d[0];})])
                                 .range([xpadding, w-xpadding]);

            var yscale = d3.scaleLinear()
                                 .domain([0, d3.max(dataset, function(d) {return d[1];})])
                                 .range([h - ypadding, ypadding])

            var xaxis = d3.axisBottom()
                          .scale(xscale)
                          .ticks(5);

            var yaxis = d3.axisLeft()
                          .scale(yscale)
                          .ticks(5);

            //create circles
            var circles = svg.selectAll("circle")
                            .data(dataset)
                            .enter()
                            .append("circle")
                            .attr("cx", function(d) {return xscale(d[0]);})
                            .attr("cy", function(d) {return yscale(d[1]);})
                            .attr("r", 10)
                            .style("fill", "grey");

            //create group, draw axes
            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(0," + (h-ypadding) + ")")
                .call(xaxis);

            svg.append("g")
                .attr("class", "axis")
                .attr("transform", "translate(" + xpadding + ", 0)")
                .call(yaxis);

            //add functionality to 'paragraph' (check data on click)
            d3.select("p")
              .on("click", function() {
                var dataset = [];

                for (var i = 0; i < numDataPoints; i++) {
                    var newNumber1 = Math.floor(Math.random() * xRange);
                    var newNumber2 = Math.floor(Math.random() * yRange);
                    dataset.push([newNumber1, newNumber2]);
                }

                var circles = svg.selectAll("circle")
                                .data(dataset)
                                .transition()
                                /*.delay(function(d, i) {
                                  return i / dataset.length * 1000;
                                })
                                .duration(500)
                                //.easeElastic(1000)
                                .attr("cx", function(d) {return xscale(d[0]);})
                                .attr("cy", function(d) {return yscale(d[1]);})
                                .attr("r", 10)
                                .style("fill", "red");
              });
              */
        </script>

    </body>
</html>
